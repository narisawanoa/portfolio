<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Noa Narisawa - Portfolio</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
:root {
  --bg:#ffffff;
  --fg:#000000;
  --muted:#545454;
  --border:#e6e6e6;
}
* { box-sizing: border-box; }
body {
  margin:0;
  font-family: 'Fira Sans', sans-serif;
  font-size: 16px;
  line-height: 1.6;
  color:var(--fg);
  background:var(--bg);
  display:flex;
  flex-direction:column;
  min-height:100vh;
}
main { flex:1; position: relative; }
header {
  position: relative;
  top: 0;
  z-index: 50;
  background: rgb(255, 255, 255);
  backdrop-filter: blur(8px);
  padding: 20px 30px;
  text-align: left;
}

.header-container {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}
.header-left {
  flex: 1;
}
.upcoming-section-header {
  margin-top: 30px;
  padding-left: 15px;
}

.upcoming-section-header .upcoming-title {
  font-size: 12px;
  font-weight: 400;
  margin-bottom: 10px;
  color: #000;
}

.upcoming-section-header .scrolling-banner {
  overflow: hidden;
  white-space: nowrap;
  font-size: 12px;
  color: #000;
  max-width: 400px;
  text-align: left;
}
header h1 { margin: 0; font-size: 18px; font-weight: 300; }
.header-left-description {
  font-size: 12px;
  line-height: 1.6;
  margin-top: 5px;
  margin-bottom: 10px;
  max-width: 400px;
  color: #000;
}
.dolphin-image {
  height: 22px;
  width: auto;
  vertical-align: middle;
  margin-left: 3px;
}
header nav { margin-top: 15px; display: flex; gap: 30px; }
header nav a {
  color: var(--fg);
  text-decoration: none;
  padding-bottom: 5px;
  border-bottom: 2px solid transparent;
  transition: border-color 0.3s ease;
  font-size: 14px;
}
header nav a:hover, header nav a.active { border-bottom-color: transparent; }
.portfolio-container { padding: 30px; }

/* Main works layout wrapper */
.main-works-wrapper-full {
  max-width: 1400px;
  margin: 0 auto;
  padding: 20px 30px 0px 30px;
  display: grid;
  grid-template-columns: 600px 1fr;
  gap: 80px;
  position: relative;
}

.titles-list {
  max-width: 600px;
}

.title-item-wrapper {
  margin-bottom: 8px;
  cursor: pointer;
  transition: opacity 0.3s ease;
  position: relative;
  display: block;
}

.title-item-wrapper:hover {
  opacity: 0.7;
  z-index: 100;
}

.title-item-wrapper .title-item {
  padding: 8px 0;
}

.thumbnails-column {
  position: relative;
  padding-top: 80px;
  padding-bottom: 100px;
  min-height: calc(100vh + 400px);
}

.upcoming-section {
  margin-top: 10px;
  padding-left: 30px;
}

.upcoming-title {
  font-size: 12px;
  font-weight: 400;
  margin-bottom: 10px;
  color: #000;
  padding-left: 0px;
}

.scrolling-banner {
  overflow: hidden;
  white-space: nowrap;
  font-size: 12px;
  color: #000;
  max-width: 400px;
  text-align: left;
  position: relative;
}

.banner-content {
  display: inline-block;
  animation: scroll-left 30s linear infinite;
}

@keyframes scroll-left {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

.title-thumbnail {
  width: 250px;
  height: 180px;
  overflow: hidden;
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f5f5f5;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  margin-bottom: 0px;
  position: absolute;
  cursor: pointer;
  transition: opacity 0.3s ease;
}

.title-thumbnail:hover {
  opacity: 0.8;
}

/* 4 layers - SYSTEMATICALLY SPACED to ensure NO overlaps
   Each layer separated by 190px in Y (>180px minimum)
   Within each layer, images are 300px+ apart in X
*/

.title-thumbnail:nth-child(1) {
  left: -300px;
  top: 0px;
}

.title-thumbnail:nth-child(2) {
  left: 50px;    /* 350px from #1 - safe */
  top: 10px;
}

.title-thumbnail:nth-child(3) {
  left: 400px;  /* 350px from #2 - safe */
  top: 20px;
}

.title-thumbnail:nth-child(4) {
  left: -350px;  /* Layer 2 */
  top: 190px;
}

.title-thumbnail:nth-child(5) {
  left: 0px;   /* 350px from #4 - safe */
  top: 200px;
}

.title-thumbnail:nth-child(6) {
  left: 350px;  /* 350px from #5 - safe */
  top: 210px;
}

.title-thumbnail:nth-child(7) {
  left: -300px;  /* Layer 3 */
  top: 380px;
}

.title-thumbnail:nth-child(8) {
  left: 50px;  /* 350px from #7 - safe */
  top: 390px;
}

.title-thumbnail:nth-child(9) {
  left: 400px;  /* 350px from #8 - safe */
  top: 400px;
}

.title-thumbnail:nth-child(10) {
  left: -350px;  /* Layer 4 */
  top: 570px;
}

.title-thumbnail:nth-child(11) {
  left: 0px;  /* 350px from #10 - safe */
  top: 580px;
}

.title-thumbnail:nth-child(12) {
  left: 350px;  /* 350px from #11 - safe */
  top: 590px;
}

/* Additional images beyond the original 12 - add 5th and 6th layers for grouping mode */
.title-thumbnail:nth-child(13) {
  left: -300px;  /* Layer 5 */
  top: 760px;
}

.title-thumbnail:nth-child(14) {
  left: 50px;  /* 350px from #13 - safe */
  top: 770px;
}

.title-thumbnail:nth-child(15) {
  left: 400px;  /* 350px from #14 - safe */
  top: 780px;
}

/* Layer 6 for any extra items in grouping mode */
.title-thumbnail:nth-child(16) {
  left: -350px;
  top: 950px;
}

.title-thumbnail:nth-child(17) {
  left: 0px;
  top: 960px;
}

.title-thumbnail:nth-child(18) {
  left: 350px;
  top: 970px;
}

.title-thumbnail img,
.title-thumbnail video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.title-thumbnail video {
  pointer-events: none;
}

.section-titles {
  margin-bottom: 30px;
  margin-top: 20px;
}

.section-titles:first-child {
  margin-top: 0;
}

.left-titles-column {
  position: relative;
}

.titles-container {
  position: relative;
}

.title-item {
  transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1), opacity 0.3s ease;
  padding: 10px 0;
  cursor: pointer;
  font-size: 18px;
}

.title-item:hover {
  color: red;
}

.title-item.animating {
  position: relative;
  z-index: 10;
}

.section-titles h2 {
  transition: transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1), opacity 0.3s ease;
}

.sort-tabs {
  display: flex;
  gap: 20px;
  margin-bottom: 40px;
  padding-bottom: 15px;
}

.sort-tab {
  font-size: 16px;
  cursor: pointer;
  padding: 5px 0;
  transition: color 0.3s ease;
  color: var(--muted);
}

.sort-tab:hover {
  color: var(--fg);
}

.sort-tab.active {
  color: var(--fg);
  font-weight: 500;
}

h2 { font-size: 20px; margin: 0 0 30px; font-weight: 400; color: red; }
.tab-content { display: none; }
.tab-content.active { display: block; }

/* Fixed thumbnail display */
.thumbnail-display {
  width: 100%;
  max-width: 100%;
  max-height: 500px;
  border-radius: 8px;
  overflow: hidden;
  display: none;
  align-items: center;
  justify-content: center;
  background: transparent;
}

.thumbnail-display.active {
  display: flex;
}

.thumbnail-display img,
.thumbnail-display video {
  max-width: 100%;
  max-height: 500px;
  width: auto;
  height: auto;
  object-fit: contain;
  display: block;
}
.thumbnail-display video {
  pointer-events: none;
}

.project-page { display: none; }
.project-page.active { display: block; }
.project-header { max-width: 1200px; margin: 0 auto; padding: 40px 30px; text-align: center; }
.project-header h1 { font-size: 32px; font-weight: 400; margin: 0 0 20px; }
.project-meta { color: var(--muted); font-size: 16px; margin-bottom: 30px; }
.project-description { font-size: 18px; line-height: 1.8; margin-bottom: 50px; max-width: 800px; margin-left: auto; margin-right: auto; }
.project-gallery { max-width: 350px; margin: 0 auto; padding: 0 30px 60px; }
.project-gallery img, .project-gallery video, .project-gallery iframe {
  width: 100%;
  max-height: 500px;
  object-fit: contain;
  margin-bottom: 30px;
  border-radius: 8px;
  cursor: pointer;
  transition: opacity 0.3s ease;
}
.project-gallery img:hover {
  opacity: 0.8;
}
.project-gallery iframe { aspect-ratio: 16/9; height: auto; }
.back-link {
  position: absolute;
  top: 20px;
  left: 30px;
  font-size: 16px;
  color: var(--fg);
  text-decoration: none;
  padding: 8px 16px;
  border: 1px solid var(--border);
  border-radius: 4px;
  transition: background-color 0.3s ease;
  background: var(--bg);
  cursor: pointer;
  z-index: 10;
}
.back-link:hover {
  background-color: var(--border);
}
.profile-section { margin-bottom: 50px; }
.profile-section h3 {
  font-size: 20px;
  font-weight: 500;
  margin: 0 0 20px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--border);
}
.profile-meta { color: var(--muted); font-size: 14px; margin-bottom: 10px; }
.cursor-coords {
  position: fixed;
  top: 35px;
  right: 10px;
  color: white;
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 12px;
  font-family: monospace;
  z-index: 100;
  pointer-events: none;
}

.contact-link {
  position: fixed;
  top: 10px;
  right: 10px;
  color: white;
  padding: 8px 12px;
  border-radius: 4px;
  font-size: 12px;
  font-family: monospace;
  z-index: 10000;
  pointer-events: auto;
  text-decoration: none;
  transition: opacity 0.3s ease;
}

.contact-link:hover {
  opacity: 0.7;
}

.header-center {
  position: fixed;
  top: 60px;
  right: 10px;
  font-size: 12px;
  line-height: 1.8;
  color: #000;
  z-index: 100;
  padding: 8px 12px;
}
.image-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.9);
  z-index: 10000;
  justify-content: center;
  align-items: center;
  cursor: pointer;
}
.image-modal.active {
  display: flex;
}
.image-modal img {
  max-width: 90%;
  max-height: 90%;
  object-fit: contain;
}
footer { padding:20px; font-size:14px; text-align: center; }
footer p { margin:0; }
@media (max-width: 768px) {
  .portfolio-container { padding: 20px; }
  .project-header h1 { font-size: 24px; }
  .project-description { font-size: 16px; }
  .back-link {
    top: 10px;
    left: 20px;
    font-size: 14px;
    padding: 6px 12px;
  }
  .title-item {
    font-size: 16px;
  }
  .title-item-wrapper {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
    margin-bottom: 0;
  }
  .title-thumbnail {
    width: 100%;
    height: 200px;
    position: relative !important;
    right: 0 !important;
  }
  .project-gallery img, .project-gallery video, .project-gallery iframe {
    max-height: 400px;
  }
}
</style>
</head>
<body>
  <header>
    <div class="header-container">
      <div class="header-left">
        <h1>Noa Narisawa</h1>
        <div class="header-left-description">
          There is a secret dolphin in this html file <img src="images/dolphin.jpg" alt="dolphin" class="dolphin-image">
        </div>
        <nav>
          <a href="#works" class="nav-link active">recent works:</a>
        </nav>
      </div>
      <div class="header-center">
        <div>Recent activities: trying to work out circuits</div>
      </div>
    </div>
  </header>
  <main id="main-content"></main>
  <div class="cursor-coords" id="coords">X: 0, Y: 0</div>
  <div class="contact-link" id="contact-link">contact → narisawa.noa@gmail.com</div>
  <div class="image-modal" id="image-modal">
    <img src="" alt="">
  </div>
  <footer><p></p></footer>

  <script>
const videoProjects = ['youtube'];
const installationProjects = ['plotter', 'sky', 'mission'];
const sculptureProjects = ['wood', 'plottedimages', 'light', 'hole', 'tide', 'woodbox', 'metal'];
const interactiveProjects = ['forest'];

const projects = {
  youtube: {
    title: "Why did you do that, idiot, murderer, jump",
    meta: "December 2025 / Video (17:04)",
    year: 2025,
    description: "This video depics caricatures of the mundane through the lens of the two metaphorical dads —hypothetical and imaginary father figures. The set of composed actions shows an ambiguous mix of joy and sorrow, and the catharsis of moments in conversations, meals, and strange occurrences. <br> <br> Made in collaboration with Cleo Kim.",
    thumb: { type: 'image', src: 'images/M2D.jpg' },
    media: [
      { type: 'youtube', src: 'b_-3fnUcD2E' },
      { type: 'image', src:'images/M2D.jpg'}
    ]
  },
  wood: {
    title: "How to shoot down a bird",
    meta: "November 2025 / Wood, multimedia installation",
    year: 2025,
    description: "From the water that fuels the vibration of the extrusion to the spinning fans powered by the electrical outlets, the assembly of different elements creates systematic movements. This is an experimental piece that plays with the relationship between the mover, the moved, and something in between.",
    thumb: { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/wood.mp4' },
    media: [
      { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/wood.mp4' },
      { type: 'image', src: 'images/wood1.JPG' },
      { type: 'image', src: 'images/wood2.jpg' },
      { type: 'image', src: 'images/wood3.jpg' },
      { type: 'image', src: 'images/wood4.jpg' }
    ]
  },
  plotter: {
    title: "Walking the plotter",
    meta: "September 2025 / Multimedia Installation",
    year: 2025,
    description: "I made a real-time generative walking track for the plotter to follow. During the walk, I added several variables to track the walk, such as distance in pixels, duration time in seconds, motor usage, and the density of lines. I used white pencil on white paper to focus viewers on the internal algorithms of the plotter for it to walk. A machine-learning with no goals or purpose.",
    thumb: { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/sr9_24_1.mp4' },
    media: [
      { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/plotter.mp4' },
      { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/sr9_24_1.mp4' },
      { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/plotter9_24com_1.mp4' }
    ]
  },
  forest: {
    title: "An unknown Entity",
    meta: "May 2025 / Multimedia Installation",
    year: 2025,
    description: "An interactive installation using harwares and software. Viewer speaks into the microphone set in the front to carry out conversation with the forest. This is an object that can receive signals from the classroom, brings into its system and generate responds.",
    thumb: { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/forest1.mp4' },
    media: [
      { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/forest1.mp4' },
      { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/forest2.mp4' },
      { type: 'image', src: 'images/forestphoto.jpeg' },
      { type: 'image', src: 'images/forestphoto2.jpeg' }
    ]
  },
  sky: {
    title: "Live Recording and Projection of the Sky",
    meta: "April 2025 / Multimedia Installation",
    year: 2025,
    description: "A live projection of the sky recording on site. The sky is divided by invisible borders that can easily be trespassed. Conversely, the land that I am bounded by blinds me from seeing the other skies but my own. With the sky that sees everything that has ever occurred on land, I attempted to capture and see the portions of the sky above me.",
    thumb: { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/beach.mp4' },
    media: [
      { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/beach.mp4' },
      { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/sky.mp4' },
      { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/sky2.mp4' }
    ]
  },
  mission: {
    title: "Mission Statement",
    meta: "March 2025 / Multimedia Installation",
    year: 2025,
    description: "A site-specific installation for RISD beach. The mission statement of RISD administration is played on repeat from a speaker inside an enclosed cube, filtered by the cube and the traffic noise surrounding the institution.",
    thumb: { type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/missionstatement.mp4' },
    media: [{ type: 'video', src: 'https://github.com/narisawanoa/portfolio/releases/download/media-v1/missionstatement.mp4' }]
  },
  
  woodbox: {
    title: "Blue box",
    meta: "November 2025 / Wood, steel, color pencil, graphite / 4 × 0.5 × 0.3 ft",
    year: 2025,
    description: "Container of a headless sheep and blue",
    thumb: { type: 'image', src: 'images/box1.jpg' },
    media: [
      { type: 'image', src: 'images/box1.jpg' },
      { type: 'image', src: 'images/box3.jpg' },
      { type: 'image', src: 'images/box2.jpg' },
      { type: 'image', src: 'images/box4.jpg' }
    ]
  },
  metal: {
    title: "Flowly bent ladder",
    meta: "October 2025 / Steel",
    year: 2025,
    description: "I explored my physical presence in this world through creating this structure. This sculpture is an extention of my physicality and its system.<br><br>3.5 × 4 × 3 ft",
    thumb: { type: 'image', src: 'images/metal1.jpg' },
    media: [
      { type: 'image', src: 'images/metal1.jpg' },
      { type: 'image', src: 'images/metal2.JPG' },
      { type: 'image', src: 'images/metal3.JPG' },
      { type: 'image', src: 'images/metal5.jpg' }
    ]
  },

  light: {
    title: "Rice Paper 2 ; Light in the colony",
    meta: "May 2025 / Wire, rice paper, reed",
    year: 2025,
    description: "In continuation from the hole in the colony sculpture, I put a light source inside the colonial structure/architecture to cast light and shadow through the transparency of the rice paper. Similar to the previous sculpture, the rice paper was used to stretch over and connect the reed structures and create holes that could allow the light to pass through.<br><br>40 × 3 × 45 in",
    thumb: { type: 'image', src: 'images/light1.jpg' },
    media: [
      { type: 'image', src: 'images/light1.jpg' },
      { type: 'image', src: 'images/light2.jpg' },
      { type: 'image', src: 'images/light3.jpg' }
    ]
  },
  hole: {
    title: "Rice Paper 1 ; Hole in the colony",
    meta: "April 2025 / Wire, rice paper, reed, wood",
    year: 2025,
    description: "From the architectural structures that I observed in NYC, I analyzed their form and scaffolding to create a sculpture that represents a living colony gathering in the architecture. The rice paper used to stretch and connect the linear reed structures dries out and begins to crack after some time, creating a nervousness and tension around it.<br><br>40 × 35 × 30 in",
    thumb: { type: 'image', src: 'images/colony.jpg' },
    media: [
      { type: 'image', src: 'images/colony.jpg' },
      { type: 'image', src: 'images/colony2.jpg' },
      { type: 'image', src: 'images/colony3.jpg' },
      { type: 'image', src: 'images/colony4.jpg' }
    ]
  },
  tide: {
    title: "Spacial Tide",
    meta: "March 2025 / Bristol paper (sketches: oil paint, procreate)",
    year: 2025,
    description: "Paper construction of water from 2D to 3D.",
    thumb: { type: 'image', src: 'images/paper0.jpg' },
    media: [
      { type: 'image', src: 'images/paper0.jpg' },
      { type: 'image', src: 'images/paper.jpeg' },
      { type: 'image', src: 'images/paper4.jpeg' },
      { type: 'image', src: 'images/paper3.jpeg' },
      { type: 'image', src: 'images/water.jpg' },
      { type: 'image', src: 'images/painting1.jpg' },
      { type: 'image', src: 'images/painting2.jpg' }
    ]
  },
  plottedimages: {
    title: "Plotted images",
    meta: "September 2025 / Pen plotter, blender",
    year: 2025,
    description: "analyzized images of digitally sculpted objects",
    thumb: { type: 'image', src: 'images/plot3.jpg' },
    media: [
      { type: 'image', src: 'images/plot3.jpg' },
      { type: 'image', src: 'images/plot2.jpg' },
      { type: 'image', src: 'images/plot1.jpg' },
      { type: 'image', src: 'images/plot4.jpg' },
      { type: 'image', src: 'images/plot5.jpg' },
      { type: 'image', src: 'images/sheepman3.png' },
      { type: 'image', src: 'images/sheepman2.png' },
      { type: 'image', src: 'images/001.jpg' },
      { type: 'image', src: 'images/004.jpg' },
      { type: 'image', src: 'images/005.jpg' }

    ]
  }
};

const cursorThumbnail = document.getElementById('cursor-thumbnail');
let currentHoveredProject = null;

function renderThumbnailMedia(item) {
  if (item.type === 'youtube') {
    return `<img src="https://img.youtube.com/vi/${item.src}/maxresdefault.jpg" alt="YouTube thumbnail">`;
  } else if (item.type === 'video') {
    return `<video autoplay loop muted playsinline><source src="${item.src}" type="video/mp4"></video>`;
  } else {
    return `<img src="${item.src}" alt="">`;
  }
}

function updateCursorThumbnail(e) {
  const offset = 20;
  cursorThumbnail.style.left = (e.clientX + offset) + 'px';
  cursorThumbnail.style.top = (e.clientY + offset) + 'px';
}

document.addEventListener('mousemove', updateCursorThumbnail);

let currentSortMode = 'grouping'; // 'grouping' or 'year'

// Helper to get month number from month name
const monthMap = {
  'January': 1, 'February': 2, 'March': 3, 'April': 4, 'May': 5, 'June': 6,
  'July': 7, 'August': 8, 'September': 9, 'October': 10, 'November': 11, 'December': 12
};

function adjustThumbnailPositions() {
  const thumbnails = document.querySelectorAll('.title-thumbnail');
  
  if (currentSortMode === 'grouping') {
    // Grouping mode: very slightly gathered toward center, ensuring no overlaps
    const groupingPositions = [
      { left: -250, top: 15 },
      { left: 80, top: 5 },
      { left: 380, top: 25 },
      { left: -230, top: 265 },
      { left: 60, top: 240 },
      { left: 360, top: 280 },
      { left: -210, top: 535 },
      { left: 100, top: 510 },
      { left: 400, top: 555 },
      { left: -270, top: 805 },
      { left: 40, top: 780 },
      { left: 340, top: 825 },
      { left: -240, top: 1070 },
      { left: 70, top: 1050 },
      { left: 370, top: 1095 }
    ];
    
    thumbnails.forEach((thumb, index) => {
      if (groupingPositions[index]) {
        thumb.style.left = groupingPositions[index].left + 'px';
        thumb.style.top = groupingPositions[index].top + 'px';
      }
    });
  } else {
    // Year mode: original spacing
    const yearPositions = [
      { left: -270, top: 8 },
      { left: 60, top: 18 },
      { left: 420, top: 2 },
      { left: -230, top: 235 },
      { left: 100, top: 215 },
      { left: 390, top: 248 },
      { left: -300, top: 455 },
      { left: 40, top: 432 },
      { left: 410, top: 468 },
      { left: -260, top: 675 },
      { left: 80, top: 652 },
      { left: 370, top: 690 },
      { left: -220, top: 895 },
      { left: 120, top: 870 },
      { left: 430, top: 910 }
    ];
    
    thumbnails.forEach((thumb, index) => {
      if (yearPositions[index]) {
        thumb.style.left = yearPositions[index].left + 'px';
        thumb.style.top = yearPositions[index].top + 'px';
      }
    });
  }
}

function showTitleList() {
  let titlesHTML = '';
  let thumbsHTML = '';
  
  if (currentSortMode === 'grouping') {
    // Original grouping by type
    const videoTitles = videoProjects.map(key => {
      const p = projects[key];
      return `<div class="title-item-wrapper" data-project="${key}" onclick="showProject('${key}')">
          <div class="title-item" data-project="${key}">${p.title}</div>
        </div>`;
    }).join('');
    
    const videoThumbs = videoProjects.map(key => {
      const p = projects[key];
      return `<div class="title-thumbnail" onclick="showProject('${key}')" style="cursor: pointer;">${renderThumbnailMedia(p.thumb)}</div>`;
    }).join('');
    
    const interactiveTitles = interactiveProjects.map(key => {
      const p = projects[key];
      return `<div class="title-item-wrapper" data-project="${key}" onclick="showProject('${key}')">
          <div class="title-item" data-project="${key}">${p.title}</div>
        </div>`;
    }).join('');
    
    const interactiveThumbs = interactiveProjects.map(key => {
      const p = projects[key];
      return `<div class="title-thumbnail" onclick="showProject('${key}')" style="cursor: pointer;">${renderThumbnailMedia(p.thumb)}</div>`;
    }).join('');
    
    const installationTitles = installationProjects.map(key => {
      const p = projects[key];
      return `<div class="title-item-wrapper" data-project="${key}" onclick="showProject('${key}')">
          <div class="title-item" data-project="${key}">${p.title}</div>
        </div>`;
    }).join('');
    
    const installationThumbs = installationProjects.map(key => {
      const p = projects[key];
      return `<div class="title-thumbnail" onclick="showProject('${key}')" style="cursor: pointer;">${renderThumbnailMedia(p.thumb)}</div>`;
    }).join('');
    
    const sculptureTitles = sculptureProjects.map(key => {
      const p = projects[key];
      return `<div class="title-item-wrapper" data-project="${key}" onclick="showProject('${key}')">
          <div class="title-item" data-project="${key}">${p.title}</div>
        </div>`;
    }).join('');
    
    const sculptureThumbs = sculptureProjects.map(key => {
      const p = projects[key];
      return `<div class="title-thumbnail" onclick="showProject('${key}')" style="cursor: pointer;">${renderThumbnailMedia(p.thumb)}</div>`;
    }).join('');
    
    titlesHTML = `
      <div class="section-titles">
        <h2>Video</h2>
        ${videoTitles}
      </div>
      <div class="section-titles">
        <h2>Interactive</h2>
        ${interactiveTitles}
      </div>
      <div class="section-titles">
        <h2>Installation</h2>
        ${installationTitles}
      </div>
      <div class="section-titles">
        <h2>Sculpture</h2>
        ${sculptureTitles}
      </div>`;
      
    thumbsHTML = videoThumbs + interactiveThumbs + installationThumbs + sculptureThumbs;
  } else {
    // Sort by year and month
    const projectsByYear = {};
    const allThumbs = [];
    
    Object.keys(projects).forEach(key => {
      const p = projects[key];
      const year = p.year || 2025;
      if (!projectsByYear[year]) {
        projectsByYear[year] = [];
      }
      
      const monthMatch = p.meta.match(/^(January|February|March|April|May|June|July|August|September|October|November|December)/);
      const monthNum = monthMatch ? monthMap[monthMatch[1]] : 0;
      
      projectsByYear[year].push({ key, monthNum });
    });
    
    const years = Object.keys(projectsByYear).sort((a, b) => b - a);
    
    titlesHTML = years.map(year => {
      const sortedProjects = projectsByYear[year].sort((a, b) => b.monthNum - a.monthNum);
      
      const titles = sortedProjects.map(({ key }) => {
        const p = projects[key];
        allThumbs.push(`<div class="title-thumbnail" onclick="showProject('${key}')" style="cursor: pointer;">${renderThumbnailMedia(p.thumb)}</div>`);
        return `<div class="title-item-wrapper" data-project="${key}" onclick="showProject('${key}')">
            <div class="title-item" data-project="${key}">${p.title}</div>
          </div>`;
      }).join('');
      
      return `
        <div class="section-titles">
          <h2>${year}</h2>
          ${titles}
        </div>`;
    }).join('');
    
    thumbsHTML = allThumbs.join('');
  }
  
  document.getElementById('main-content').innerHTML = `
    <div class="tab-content active">
      <div class="main-works-wrapper-full">
        <div class="left-titles-column">
          <div class="sort-tabs">
            <span class="sort-tab ${currentSortMode === 'year' ? 'active' : ''}" onclick="changeSortMode('year')">Year created</span>
            <span class="sort-tab ${currentSortMode === 'grouping' ? 'active' : ''}" onclick="changeSortMode('grouping')">Grouping</span>
          </div>
          <div class="titles-container titles-list">
            ${titlesHTML}
          </div>
        </div>
        <div class="thumbnails-column">
          ${thumbsHTML}
        </div>
      </div>
      <div class="upcoming-section">
        <div class="upcoming-title">upcoming...</div>
        <div class="scrolling-banner">
          <div class="banner-content">exposed handmade hardwares, following a command, simulated personal experience, bringing distance closer, something embrasive, ... &nbsp;&nbsp;&nbsp;&nbsp; exposed handmade hardwares, following a command, simulated personal experience, bringing distance closer, something embrasive, ... &nbsp;&nbsp;&nbsp;&nbsp; </div>
        </div>
      </div>
    </div>`;
  
  setupAllTitleListeners();
  
  // Adjust thumbnail positions based on sort mode
  requestAnimationFrame(() => {
    adjustThumbnailPositions();
  });
}

function changeSortMode(mode) {
  if (currentSortMode === mode) return;
  
  const titlesContainer = document.querySelector('.titles-container');
  if (!titlesContainer) {
    currentSortMode = mode;
    showTitleList();
    return;
  }
  
  // FLIP: First - Record initial positions
  const items = Array.from(titlesContainer.querySelectorAll('.title-item, .section-titles h2'));
  const firstPositions = new Map();
  
  items.forEach(item => {
    const rect = item.getBoundingClientRect();
    const key = item.dataset.project || item.textContent.trim();
    firstPositions.set(key, {
      element: item,
      top: rect.top,
      left: rect.left
    });
  });
  
  // FLIP: Last - Change the content and record final positions
  currentSortMode = mode;
  showTitleList();
  
  // Wait for DOM to update
  requestAnimationFrame(() => {
    const newTitlesContainer = document.querySelector('.titles-container');
    const newItems = Array.from(newTitlesContainer.querySelectorAll('.title-item, .section-titles h2'));
    
    newItems.forEach(newItem => {
      const key = newItem.dataset.project || newItem.textContent.trim();
      const first = firstPositions.get(key);
      
      if (first) {
        // FLIP: Invert - Calculate the difference
        const last = newItem.getBoundingClientRect();
        const deltaX = first.left - last.left;
        const deltaY = first.top - last.top;
        
        // FLIP: Play - Apply transform and animate to 0
        newItem.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
        newItem.style.transition = 'none';
        
        requestAnimationFrame(() => {
          newItem.style.transition = 'transform 0.6s cubic-bezier(0.4, 0.0, 0.2, 1)';
          newItem.style.transform = 'translate(0, 0)';
        });
      }
    });
  });
}

function setupAllTitleListeners() {
  // Listeners are now handled by onclick in the HTML
}

function showWorks() {
  showTitleList();
}

function showProject(key) {
  const p = projects[key];
  const mediaHTML = p.media.map(m => {
    if (m.type === 'youtube') {
      return `<iframe width="100%" height="400" src="https://www.youtube.com/embed/${m.src}?rel=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>`;
    } else if (m.type === 'video') {
      return `<video controls preload="metadata"><source src="${m.src}" type="video/mp4"><source src="${m.src}" type="video/quicktime">Your browser does not support the video tag.</video>`;
    } else {
      return `<img src="${m.src}" alt="" class="clickable-image">`;
    }
  }).join('');
  
  const allProjectsTitles = Object.keys(projects).map(k => {
    const proj = projects[k];
    return `<div class="title-item" data-project="${k}">${proj.title}</div>`;
  }).join('');
  
  document.getElementById('main-content').innerHTML = `
    <div class="project-page active">
      <a href="#works" class="back-link" onclick="showWorks(); return false;">← Works</a>
      <div class="project-header">
        <h1>${p.title}</h1>
        <div class="project-meta">${p.meta}</div>
        <div class="project-description">${p.description}</div>
      </div>
      <div class="project-gallery">${mediaHTML}</div>
      <div class="portfolio-container">
        <div class="main-works-wrapper">
          <div class="left-titles-column">
            <h2>All Works</h2>
            ${allProjectsTitles}
          </div>
          <div class="right-thumbnail-column">
            <div class="thumbnail-display" id="all-works-thumbnail"></div>
          </div>
        </div>
      </div>
    </div>`;
  
  // Add event listeners to the "All Works" title items
  setupAllTitleListeners();
  
  // Add click listeners to images
  document.querySelectorAll('.clickable-image').forEach(img => {
    img.addEventListener('click', function() {
      const modal = document.getElementById('image-modal');
      const modalImg = modal.querySelector('img');
      modalImg.src = this.src;
      modal.classList.add('active');
    });
  });
  
  window.scrollTo(0, 0);
}

function showProfile() {
  document.getElementById('main-content').innerHTML = `
    <div class="tab-content active">
      <div class="portfolio-container">
        <h2>Profile</h2>
        <div class="title-list">
          <div class="profile-section">
            <h3>Education</h3>
            <div class="profile-meta">Rhode Island School of Design (RISD), Providence, RI</div>
            <div class="profile-meta">Bachelor of Fine Arts, Sculpture 2028</div>
          </div>
          <div class="profile-section">
            <h3>Contact</h3>
            <div class="profile-meta">Email: narisawa.noa@gmail.com</div>
          </div>
        </div>
      </div>
    </div>`;
}

document.querySelectorAll('.nav-link').forEach(link => {
  link.addEventListener('click', (e) => {
    e.preventDefault();
    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
    link.classList.add('active');
    showWorks();
  });
});

showWorks();

// Image modal close functionality
document.getElementById('image-modal').addEventListener('click', function() {
  this.classList.remove('active');
});

// Contact email copy to clipboard functionality
document.getElementById('contact-link').addEventListener('click', function() {
  const email = 'narisawa.noa@gmail.com';
  navigator.clipboard.writeText(email).then(() => {
    // Temporarily change text to show it was copied
    const originalText = this.textContent;
    this.textContent = 'contact → copied!';
    setTimeout(() => {
      this.textContent = originalText;
    }, 1500);
  }).catch(err => {
    console.error('Failed to copy email:', err);
  });
});

// Cursor drawing effect
const canvas = document.createElement('canvas');
canvas.style.position = 'fixed';
canvas.style.top = '0';
canvas.style.left = '0';
canvas.style.width = '100%';
canvas.style.height = '100%';
canvas.style.pointerEvents = 'none';
canvas.style.zIndex = '9999';
document.body.appendChild(canvas);

const ctx = canvas.getContext('2d');
let isDrawing = false;
let lastX = 0;
let lastY = 0;
let lastTime = Date.now();

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

resizeCanvas();
window.addEventListener('resize', resizeCanvas);

let mouseX = window.innerWidth / 2;
let mouseY = window.innerHeight / 2;

document.addEventListener('mousemove', (e) => {
  mouseX = e.clientX;
  mouseY = e.clientY;
  
  const coordsEl = document.getElementById('coords');
  coordsEl.textContent = `X: ${e.clientX}, Y: ${e.clientY}`;

  const w = window.innerWidth || 1;
  const h = window.innerHeight || 1;

  const r = Math.round((e.clientX / w) * 255);
  const g = Math.round((e.clientY / h) * 255);
  const b = Math.round(255 - ((r + g) / 2));

  const colorValue = `rgb(${r}, ${g}, ${b})`;
  coordsEl.style.color = colorValue;
  
  // Apply same color to contact link
  const contactEl = document.getElementById('contact-link');
  if (contactEl) {
    contactEl.style.color = colorValue;
  }
  
  // Draw line
  if (!isDrawing) {
    lastX = e.clientX;
    lastY = e.clientY;
    lastTime = Date.now();
    isDrawing = true;
    return;
  }
  
  // Calculate velocity (distance / time)
  const currentTime = Date.now();
  const timeDelta = Math.max(currentTime - lastTime, 1); // Avoid division by zero
  const distance = Math.sqrt(Math.pow(e.clientX - lastX, 2) + Math.pow(e.clientY - lastY, 2));
  const velocity = distance / timeDelta;
  
  // Map velocity to opacity: slower = more opaque, faster = less opaque
  // velocity ranges roughly from 0 (stationary) to 5+ (fast movement)
  // We'll map it so: slow motion (0-0.5) = 0.9 opacity, fast motion (2+) = 0.2 opacity
  let opacity = Math.max(0.2, Math.min(0.9, 0.9 - (velocity * 0.3)));
  
  ctx.beginPath();
  ctx.moveTo(lastX, lastY);
  ctx.lineTo(e.clientX, e.clientY);
  ctx.strokeStyle = `rgba(${r}, ${g}, ${b}, ${opacity})`;
  ctx.lineWidth = 2;
  ctx.stroke();
  
  lastX = e.clientX;
  lastY = e.clientY;
  lastTime = currentTime;
});

// Optional: clear canvas periodically or on click
document.addEventListener('click', () => {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  isDrawing = false;
});
  </script>
</body>
</html>